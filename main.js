(()=>{"use strict";var e={208:(e,t,n)=>{n.d(t,{A:()=>f});var a=n(601),i=n.n(a),r=n(314),s=n.n(r),o=n(417),l=n.n(o),c=new URL(n(165),n.b),d=new URL(n(842),n.b),p=new URL(n(504),n.b),h=s()(i()),u=l()(c),m=l()(d),g=l()(p);h.push([e.id,`* {\n  /* font */\n  font-family: "Handjet", system-ui;\n  font-optical-sizing: auto;\n  font-weight: 400;\n  font-style: normal;\n  font-variation-settings: "ELGR" 1, "ELSH" 2;\n}\nbody {\n  background: rgb(118, 122, 93);\n  background: radial-gradient(\n    circle,\n    rgba(118, 122, 93, 1) 0%,\n    rgba(47, 53, 78, 1) 69%\n  );\n  animation: gradient 8s ease-in infinite;\n  display: flex;\n  flex-direction: column;\n  margin: 0;\n  padding: 0;\n  align-items: center;\n  min-height: 100vh;\n}\n\n.container {\n  display: flex;\n  flex-direction: column;\n}\n.page-content {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n\n.logo {\n  font-family: "Rubik Pixels", system-ui;\n  font-weight: 500;\n  font-style: normal;\n  font-size: 100px;\n}\n\n/* name page */\n#main-logo {\n  font-family: "Rubik Pixels", system-ui;\n  font-weight: 500;\n  font-style: normal;\n  font-size: 140px;\n  margin-bottom: 0;\n  opacity: 0; /* Initially hidden */\n  background-image: linear-gradient(\n    to right,\n    #1b1a27,\n    #000000\n  ); /* Gradient effect */\n  background-clip: text; /* Ensures the gradient affects the text */\n  -webkit-background-clip: text;\n  color: transparent; /* Hide the original text color */\n  transition: opacity 2s ease-in-out 1s;\n}\n\nbody.loaded #main-logo {\n  opacity: 1; /* Make the text visible */\n}\n\n#name-page {\n  position: relative;\n}\n\n.form-div {\n  position: absolute;\n  top: 250px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 40%;\n  background-color: rgba(255, 255, 255, 0.9);\n  z-index: 1000;\n  opacity: 90%;\n  border-radius: 0.75rem;\n  padding: 30px 10px 30px 10px;\n  opacity: 0;\n  transition: opacity 2s ease-in-out 4s;\n}\nbody.loaded .form-div {\n  opacity: 1; /* Make the text visible */\n}\n\n.enter-name {\n  font-size: 48px;\n}\n\nform {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n}\n\n#user-name {\n  width: 100%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  box-sizing: border-box;\n  font-size: 30px;\n  border-radius: 0.75rem;\n  text-align: center;\n}\n\n#name-submit,\n#orientation-btn,\n#play-again {\n  background-color: #111827;\n  border: 1px solid transparent;\n  border-radius: 0.75rem;\n  box-sizing: border-box;\n  color: #ffffff;\n  cursor: pointer;\n  flex: 0 0 auto;\n  font-size: 30px;\n  font-weight: 600;\n  line-height: 1.5rem;\n  padding: 0.75rem 1.2rem;\n  text-align: center;\n  text-decoration: none #6b7280 solid;\n  text-decoration-thickness: auto;\n  transition-duration: 0.2s;\n  transition-property: background-color, border-color, color, fill, stroke;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  user-select: none;\n  -webkit-user-select: none;\n  touch-action: manipulation;\n  width: auto;\n}\n\n#name-submit:hover,\n#play-again:hover,\n#orientation-btn:hover {\n  background-color: #374151;\n}\n\n#name-submit:focus,\n#play-again:focus,\n#orientation-btn:focus {\n  box-shadow: none;\n  outline: 2px solid transparent;\n  outline-offset: 2px;\n}\n\n@media (min-width: 768px) {\n  #name-submit,\n  #orientation-btn,\n  #play-again {\n    padding: 0.75rem 1.5rem;\n  }\n}\n\n#orientation-btn {\n  margin-bottom: 20px;\n}\n\n.battleship-img {\n  opacity: 0;\n  position: absolute;\n  top: 2px;\n  background-image: url(${u});\n  width: 800px;\n  height: 800px;\n  background-size: cover;\n  transition: opacity 2s ease-in-out 2s;\n}\nbody.loaded .battleship-img {\n  opacity: 1; /* Make the text visible */\n}\n\n/* set ship page */\n\n.instruction {\n  font-size: 40px;\n  padding-bottom: 20px;\n  font-weight: 500;\n  color: #ffffffe3;\n}\n#user-set-ship {\n  width: 600px;\n  height: 600px;\n}\n.boards {\n  margin-top: 30px;\n  margin-bottom: 30px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 20px;\n  width: 100%;\n}\n.gameboard {\n  display: grid;\n  grid-template-columns: repeat(10, 1fr);\n  grid-template-rows: repeat(10, 1fr);\n  position: relative;\n  box-shadow: 0 -5px 3px -3px black, 0 5px 3px -3px black;\n}\n\n.cell {\n  background-color: #162c4c;\n  border: 2px solid #fff;\n  padding: 20px;\n  font-size: 30px;\n  text-align: center;\n  position: relative;\n}\n\n.cell:hover {\n  /* background-color: #2e4668; */\n  cursor: crosshair;\n  transition: all 0.3s ease 0s;\n}\n#player-two-board .cell:hover {\n  background-color: #96180a;\n}\n\n.highlight {\n  background-color: rgba(130, 221, 156, 0.928);\n}\n\n.invalid-highlight {\n  background-color: red;\n  pointer-events: none;\n}\n\n.ship-placed {\n  pointer-events: none;\n  background-color: rgb(4, 28, 60);\n}\n\n/* game play page */\n\n#game-container {\n  width: 100%;\n  height: 100%;\n}\n#game-page {\n  width: 100%;\n}\n#game-page-logo {\n  font-size: 50px;\n  margin-bottom: 20px;\n}\n.board-label {\n  font-size: 50px;\n  text-align: center;\n  margin-top: 20px;\n  background-color: #fff;\n  color: #111827;\n  font-weight: 600;\n  width: 80%;\n  border-radius: 10px;\n  box-shadow: 10px 5px 5px #376dbd;\n}\n/* Game Message animations */\n.gameMsg {\n  background-color: none;\n  text-align: center;\n  width: 100%;\n  color: #fff;\n  font-size: 40px;\n  overflow: hidden; /* Ensures the content is not revealed until the animation */\n  white-space: nowrap; /* Keeps the content on a single line */\n  margin: 0 auto; /* Gives that scrolling effect as the typing happens */\n  letter-spacing: 0.15em; /* Adjust as needed */\n  animation: typing 2.5s steps(40, end), step-start infinite;\n}\n\n/* The typing effect */\n@keyframes typing {\n  from {\n    width: 0;\n  }\n  to {\n    width: 100%;\n  }\n}\n\n/* ship svg elements and divs */\n.svg-div {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  overflow: hidden;\n  position: absolute; /* Absolute positioning to overlay cells */\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none; /* Make sure the SVG doesnâ€™t interfere with mouse events */\n  z-index: 1; /* Ensure the SVG is above the cells */\n}\n\n.ship-svg {\n  width: 90%;\n  height: 90%;\n  object-fit: cover;\n}\n\n.svg-div .y {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: auto;\n  height: 100%;\n  transform: translate(-50%, -50%) rotate(90deg); /* Center and rotate */\n  transform-origin: center;\n}\n\n.cpu-hidden {\n  display: none;\n}\n\n.sunk-ship {\n  filter: grayscale(100%) brightness(0) sepia(100%) hue-rotate(180deg)\n    saturate(10000%);\n}\n\n/* cell clicking and UI handling */\n.clicked {\n  pointer-events: none;\n}\n\n.missed-cell,\n.hit-cell {\n  background-size: 30px;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n\n.missed-cell {\n  background-image: url(${m});\n}\n.hit-cell {\n  background-image: url(${g});\n}\n\n#player-one-board {\n  pointer-events: none;\n}\n.disabled {\n  pointer-events: none;\n}\n.user,\n.cpu {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n#player-one-board,\n#player-two-board {\n  width: 600px;\n  height: 600px;\n}\n\n#play-again {\n  margin: 20px;\n}\n\n/* footer */\n.footer {\n  display: flex;\n  justify-content: center;\n  background-color: rgb(4, 28, 60);\n  width: 100vw;\n  margin: 0 auto;\n  margin-top: auto;\n  margin-bottom: 0;\n  font-size: 28px;\n  color: #fff;\n  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000,\n    1px 1px 0 #000;\n}\na {\n  text-decoration: none;\n  color: #fff;\n}\n`,""]);const f=h},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",a=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),a&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),a&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,a,i,r){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(a)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);a&&s[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),t.push(d))}},t}},417:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function n(e){for(var n=-1,a=0;a<t.length;a++)if(t[a].identifier===e){n=a;break}return n}function a(e,a){for(var r={},s=[],o=0;o<e.length;o++){var l=e[o],c=a.base?l[0]+a.base:l[0],d=r[c]||0,p="".concat(c," ").concat(d);r[c]=d+1;var h=n(p),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(u);else{var m=i(u,a);a.byIndex=o,t.splice(o,0,{identifier:p,updater:m,references:1})}s.push(p)}return s}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var r=a(e=e||[],i=i||{});return function(e){e=e||[];for(var s=0;s<r.length;s++){var o=n(r[s]);t[o].references--}for(var l=a(e,i),c=0;c<r.length;c++){var d=n(r[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}r=l}}},659:e=>{var t={};e.exports=function(e,n){var a=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,i&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},504:(e,t,n)=>{e.exports=n.p+"e93481490058afc99385.svg"},165:(e,t,n)=>{e.exports=n.p+"6b12013697f12e45825d.png"},842:(e,t,n)=>{e.exports=n.p+"75efd2eb463a714020db.svg"}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var r=t[a]={id:a,exports:{}};return e[a](r,r.exports,n),r.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");if(a.length)for(var i=a.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=a[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0;const a=n.p+"263fd2d8f4a5ca1e23d9.svg",i=n.p+"3282019e37562c51e199.svg",r=n.p+"3349fcc873ba398263be.svg",s=n.p+"84082ecc9a74948790b6.svg",o=n.p+"41bfb84727d81d9646ce.svg";class l{constructor(e){this.game=e,this.userName=this.game.userName,this.userTurn=!0,this.gameEnded=!1}initialize(){this.setDOMElements(),this.updateUI(),this.domElements(),this.setupEventListeners()}setDOMElements(){const e=document.querySelector(".container");e.id="game-container";const t=document.createElement("div");t.className="page-content",t.id="game-page";const n=document.createElement("div");n.className="logo",n.id="game-page-logo",n.textContent="BATTLESHIP",t.appendChild(n);const a=document.createElement("div");a.classList.add("gameMsg"),a.textContent=`Awaiting orders, Admiral ${this.userName}.`,t.appendChild(a);const i=document.createElement("div");i.classList.add("boards");const r=document.createElement("div");r.classList.add("user");const s=document.createElement("div");s.classList.add("gameboard"),s.id="player-one-board",r.appendChild(s);const o=document.createElement("div");o.classList.add("board-label"),o.textContent=`${this.userName}`,r.appendChild(o),i.appendChild(r);const l=document.createElement("div");l.classList.add("cpu");const c=document.createElement("div");c.classList.add("gameboard"),c.id="player-two-board",l.appendChild(c);const d=document.createElement("div");d.classList.add("board-label"),d.textContent="CPU",l.appendChild(d),i.appendChild(l),t.appendChild(i),e.appendChild(t)}domElements(){this.cpuBoard=document.getElementById("player-two-board"),this.userCells=document.querySelectorAll("#player-one-board .cell"),this.cpuCells=document.querySelectorAll("#player-two-board .cell"),this.gameMsg=document.querySelector(".gameMsg")}setupEventListeners(){this.cpuCells&&0!==this.cpuCells.length?this.cpuCells.forEach((e=>{e.addEventListener("click",(e=>this.handleAttack(e)))})):console.error("CPU cells are not available for event listeners.")}renderBoard(e,t){const n=document.getElementById(t);n.innerHTML="";for(let e=0;e<100;e++){const a=parseInt(e/10),i=e%10,r=document.createElement("div");r.classList.add("cell"),"player-two-board"===t?r.setAttribute("id","c"+a+"-"+i):r.setAttribute("id","u"+a+"-"+i),n.appendChild(r)}const a=e.grid,i=[];for(let r=0;r<e.size;r++)for(let s=0;s<e.size;s++){const e=a[r][s];if(e&&!i.includes(e.name)){i.push(e.name);const a=document.createElement("img"),o=this.determineShipType(e),l=this.determineShipClassName(e);if("player-two-board"===t&&(a.classList.contains("sunk-ship")||a.classList.add("cpu-hidden")),o){a.src=o,a.classList.add("ship-svg",l);const t="X"===e.orientation,i=document.createElement("div");i.classList.add("svg-div"),t?i.style.gridArea=`${r+1} / ${s+1} / span 1 / span ${e.length}`:(a.classList.add("y"),i.style.gridArea=`${r+1} / ${s+1} / span ${e.length} / span 1`),i.appendChild(a),n.appendChild(i)}}}}determineShipType(e){switch(e.name){case"carrier":return a;case"battleship":return i;case"destroyer":return r;case"submarine":return o;case"patrolBoat":return s;default:return console.error("Unknown ship type:",e.name),null}}cpuAttack(){this.gameOver()?this.endGame():setTimeout((()=>{const e=this.game.randomAttack(),t=`${e.randomRow}-${e.randomColumn}`,n=document.getElementById(`u${t}`);setTimeout((()=>{this.handleAttack(n)}),1e3)}),1500)}determineShipClassName(e){switch(e.name){case"carrier":return"carrier-svg";case"battleship":return"battleship-svg";case"destroyer":return"destroyer-svg";case"submarine":return"submarine-svg";case"patrolBoat":return"patrolBoat-svg";default:return console.error("Unknown ship type:",e.name),null}}updateTurn(){this.gameOver()?this.endGame():(this.userTurn=!this.userTurn,this.toggleUserTurn(this.userTurn),this.userTurn?setTimeout((()=>{this.gameMsg.textContent=`Awaiting orders, Admiral ${this.userName}.`,this.resetAnimation(this.gameMsg)}),1500):setTimeout((()=>{this.cpuAttack()}),1e3))}toggleUserTurn(){this.userTurn?this.cpuBoard.classList.remove("disabled"):this.cpuBoard.classList.add("disabled")}handleAttack(e){if(this.gameEnded)return;let t,n;if(this.userTurn&&(this.gameMsg.textContent=`Awaiting orders, Admiral ${this.userName}.`,this.resetAnimation(this.gameMsg)),e instanceof Event){const a=e.target;t=a.id,n=a.closest(".gameboard"),a.classList.add("clicked")}else e instanceof HTMLElement&&(t=e.id,n=e.closest(".gameboard"),e.classList.add("clicked"));const a=t[1],i=t[3],r=this.game.getBoard(n.id);e instanceof Event?this.gameMsg.textContent="Launching attack...":e instanceof HTMLElement&&(this.gameMsg.textContent="CPU launching attack..."),this.resetAnimation(this.gameMsg),setTimeout((()=>{r.receiveAttack(a,i,n),this.updateCellUI(a,i,r,n.id),this.gameOver()&&this.endGame(),this.updateTurn()}),1500)}updateCellUI(e,t,n,a){let i;this.resetAnimation(this.gameMsg),i="player-one-board"===a?document.getElementById(`u${e}-${t}`):document.getElementById(`c${e}-${t}`);const r=n.attacksMade[e][t];"hit"===r?(i.classList.add("hit-cell"),this.gameMsg.textContent="Ship hit!",this.resetAnimation(this.gameMsg)):"missed"===r&&(i.classList.add("missed-cell"),this.gameMsg.textContent="...and attack misses.",this.resetAnimation(this.gameMsg));const s=n.grid[e][t];console.log("lemado",n.grid[e][t]),null!==s&&s.isSunk()&&(this.gameMsg.textContent=`${s.name} sunk.`)}resetAnimation(e){e.style.animation="none",e.offsetHeight,e.style.animation=null}updateUI(){this.renderBoard(this.game.playerOneBoard,"player-one-board"),this.renderBoard(this.game.playerTwoBoard,"player-two-board"),this.domElements()}gameOver(){const e=this.game.checkAllShipsSunk(this.game.playerOne),t=this.game.checkAllShipsSunk(this.game.playerTwo);return e||t}endGame(){if(this.gameEnded)return;this.gameEnded=!0,this.gameMsg.textContent="Game Over!";const e=document.getElementById("game-page");let t=document.getElementById("play-again");t||(t=document.createElement("button"),t.id="play-again",t.textContent="Play Again",t.addEventListener("click",(()=>{window.location.reload()})),e.appendChild(t))}}var c=n(72),d=n.n(c),p=n(825),h=n.n(p),u=n(659),m=n.n(u),g=n(56),f=n.n(g),b=n(540),y=n.n(b),v=n(113),x=n.n(v),w=n(208),C={};C.styleTagTransform=x(),C.setAttributes=f(),C.insert=m().bind(null,"head"),C.domAPI=h(),C.insertStyleElement=y(),d()(w.A,C),w.A&&w.A.locals&&w.A.locals;class k{constructor(e){this.size=e,this.grid=Array.from({length:e},(()=>Array(e).fill(null))),this.attacksMade=Array.from({length:e},(()=>Array(e).fill(null))),this.ships=[],this.tempGrid=Array.from({length:e},(()=>Array(e).fill(null))),this.missed=[]}placeShip(e,t,n,a){if(a){if(t+e.length>this.size)return!1;for(let a=0;a<e.length;a++)if(null!==this.grid[t+a][n])return!1;for(let a=0;a<e.length;a++)"temp"!==e.name&&(this.grid[t+a][n]=e)}else{if(n+e.length>this.size)return!1;for(let a=0;a<e.length;a++)if(null!==this.grid[t][n+a])return!1;for(let a=0;a<e.length;a++)"temp"!==e.name&&(this.grid[t][n+a]=e)}return!0}checkCPUShipPlacement(e,t,n,a){if(a){if(t+e.length>this.size)return!1;for(let a=0;a<e.length;a++)if(null!==this.tempGrid[t+a][n])return!1;for(let a=0;a<e.length;a++)this.tempGrid[t+a][n]=e}else{if(n+e.length>this.size)return!1;for(let a=0;a<e.length;a++)if(null!==this.tempGrid[t][n+a])return!1;for(let a=0;a<e.length;a++)this.tempGrid[t][n+a]=e}return!0}receiveAttack(e,t,n){const a=this.grid[e][t];if(null!==a){if(this.attacksMade[e][t]="hit",a.hit(),a.isSunk()){const e=`${a.name}-svg`,t=n.querySelector(`img.${e}`);t.classList.add("sunk-ship"),t.classList.remove("cpu-hidden")}}else this.attacksMade[e][t]="missed",this.storeMissed(e,t)}storeMissed(e,t){const n=[e,t];this.missed.push(n)}}class E{constructor(e,t,n){this.type=e,this.gameboard=t,this.ships=n}}class S{constructor(e,t,n,a=!1,i,r=0){this.name=e,this.length=t,this.hits=r,this.sunk=a,this.orientation=n,this.start=i}hit(){this.hits++}isSunk(){return this.length<=this.hits}}class L{constructor(e,t){this.userName=t,this.ships=e,this.playerOneBoard=new k(10),this.playerTwoBoard=new k(10),this.playerOneShips={};for(const e in this.ships)if(this.ships.hasOwnProperty(e)){const t=this.ships[e];this.playerOneShips[e]=new S(t.name,t.length,t.orientation,!1,t.start)}this.playerTwoShips={carrier:new S("carrier",5),battleship:new S("battleship",4),destroyer:new S("destroyer",3),submarine:new S("submarine",3),patrolBoat:new S("patrolBoat",2)};for(const e in this.playerTwoShips)if(this.playerTwoShips.hasOwnProperty(e)){const t=this.playerTwoShips[e],{x:n,y:a,compOrientation:i}=this.getRandomCoordinatesAndOrientation(this.playerTwoBoard.size,t.length);t.orientation=i,t.sunk=!1,t.start=[n,a]}this.playerOne=new E("person",this.playerOneBoard,this.playerOneShips),this.playerTwo=new E("computer",this.playerTwoBoard,this.playerTwoShips),this.loadShipsForPlacement(this.playerOneBoard,this.playerOneShips),this.loadShipsForPlacement(this.playerTwoBoard,this.playerTwoShips)}getBoard(e){return"player-one-board"===e?this.playerOneBoard:"player-two-board"===e?this.playerTwoBoard:void 0}loadShipsForPlacement(e,t){for(const n in t){const a=t[n];if(a&&a.start){const[t,n]=a.start;e.placeShip(a,t,n,"Y"===a.orientation)}}}checkAllShipsSunk(e){return e.ships&&"object"==typeof e.ships?Object.values(e.ships).every((e=>e.isSunk())):(console.error("Player's ships are not properly initialized."),!1)}getRandomCoordinatesAndOrientation(e,t){let n,a,i,r=!1;for(;!r;){const s=["X","Y"];i=s[Math.floor(Math.random()*s.length)];const o="X"===i?e-1:e-t,l="Y"===i?e-1:e-t;n=Math.floor(Math.random()*(o+1)),a=Math.floor(Math.random()*(l+1));const c="Y"===i;r=this.playerTwoBoard.checkCPUShipPlacement(new S("temp",t,i,!1,[n,a],0),n,a,c)}return{x:n,y:a,compOrientation:i}}randomAttack(){let e,t,n=!1;for(;!n;)e=Math.floor(Math.random()*this.playerOneBoard.size),t=Math.floor(Math.random()*this.playerOneBoard.size),n=null===this.playerOneBoard.attacksMade[e][t];return{randomRow:e,randomColumn:t}}static initialize(){return new L}}const A={carrier:{length:5,placed:!1,start:null,orientation:null,name:"carrier"},battleship:{length:4,placed:!1,start:null,orientation:null,name:"battleship"},destroyer:{length:3,placed:!1,start:null,orientation:null,name:"destroyer"},submarine:{length:3,placed:!1,start:null,orientation:null,name:"submarine"},patrolBoat:{length:2,placed:!1,start:null,orientation:null,name:"patrolBoat"}};(()=>{const e=document.querySelector(".container"),t=document.createElement("div");t.className="page-content",t.id="name-page";const n=document.createElement("div");n.className="logo",n.id="main-logo",n.textContent="BATTLESHIP";const c=document.createElement("div");c.classList.add("battleship-img");const d=document.createElement("div");d.className="form-div";const p=document.createElement("p");p.className="enter-name",p.textContent="Enter Name for Battle";const h=document.createElement("form");h.id="name-form";const u=document.createElement("input");u.id="user-name",u.placeholder="Combatant Name";const m=document.createElement("button");m.id="name-submit",m.type="submit",m.textContent="Start Battle",h.appendChild(u),h.appendChild(m),d.appendChild(p),d.appendChild(h),t.appendChild(n),t.appendChild(d),t.appendChild(c),e.appendChild(t),window.addEventListener("load",(()=>{document.body.classList.add("loaded")})),h.addEventListener("submit",(e=>{!function(){const e=document.querySelector(".container"),t=document.querySelector(".page-content");t&&e.removeChild(t)}(),(e=>{const t=document.querySelector(".container"),n=document.createElement("div");n.className="page-content",n.id="ship-page";const c=document.createElement("div");c.className="logo",c.textContent="BATTLESHIP";const d=document.createElement("button");d.className="orientation-btn",d.id="orientation-btn";let p="X";d.textContent="Orientation: "+p;const h=document.createElement("div");h.className="instruction";const u=document.createElement("div");u.className="boards";const m=document.createElement("div");m.className="gameboard",m.id="user-set-ship";for(let e=0;e<100;e++){const t=parseInt(e/10),n=e%10,a=document.createElement("div");a.classList.add("cell"),a.setAttribute("id",t+"-"+n),m.appendChild(a)}u.appendChild(m);let g=A.carrier;h.textContent=`${e.toUpperCase()}, PLACE YOUR ${g.name.toUpperCase()}`;let f=null;function b(e,t){const[n,a]=v(e);let i=!0;if("X"===p?a+t.length>10&&(i=!1):"Y"===p&&n+t.length>10&&(i=!1),i)for(let e=0;e<t.length;e++){const t="X"===p?x(n,a+e):x(n+e,a);t&&t.classList.add("highlight")}else for(let e=0;e<t.length;e++){const t="X"===p?x(n,a+e):x(n+e,a);t&&t.classList.add("invalid-highlight")}}function y(e,t){const[n,a]=v(e);for(let e=0;e<t.length;e++){const t="X"===p?x(n,a+e):x(n+e,a);t&&t.classList.remove("highlight","invalid-highlight")}}function v(e){const[t,n]=e.id.split("-").map(Number);return[t,n]}function x(e,t){return document.getElementById(`${e}-${t}`)}m.addEventListener("mouseover",(e=>{e.target.classList.contains("cell")&&(f=e.target,b(f,g))})),m.addEventListener("mouseout",(e=>{e.target.classList.contains("cell")&&y(e.target,g)})),m.addEventListener("click",(t=>{t.target.classList.contains("cell")&&(f=t.target,function(e,t){const n=[],[l,c]=v(e);if(t.start=[l,c],t.placed=!0,t.orientation=p,!n.includes(t.name)){n.push(t.name);const e=document.createElement("img"),d=function(e){switch(e.name){case"carrier":return a;case"battleship":return i;case"destroyer":return r;case"submarine":return o;case"patrolBoat":return s;default:return console.error("Unknown ship type:",e.name),null}}(t),p=function(e){switch(e.name){case"carrier":return"carrier-svg";case"battleship":return"battleship-svg";case"destroyer":return"destroyer-svg";case"submarine":return"submarine-svg";case"patrolBoat":return"patrolBoat-svg";default:return console.error("Unknown ship type:",e.name),null}}(t);if(d){e.src=d,e.classList.add("ship-svg",p);const n=document.createElement("div");if(n.classList.add("svg-div"),"X"===t.orientation){n.style.gridArea=`${l+1} / ${c+1} / span 1 / span ${t.length}`;for(let e=0;e<t.length;e++){const t=x(l,c+e);t&&t.classList.add("ship-placed")}}else if("Y"===t.orientation){e.classList.add("y"),n.style.gridArea=`${l+1} / ${c+1} / span ${t.length} / span 1`;for(let e=0;e<t.length;e++){const t=x(l+e,c);t&&t.classList.add("ship-placed")}}n.appendChild(e),document.querySelector(".gameboard").appendChild(n)}}}(f,g),g===A.carrier?g=A.battleship:g===A.battleship?g=A.destroyer:g===A.destroyer?g=A.submarine:g===A.submarine?g=A.patrolBoat:g===A.patrolBoat&&(console.log("All ships placed!",A),function(){const e=document.querySelector(".container"),t=document.querySelector(".page-content");t&&e.removeChild(t)}(),function(){const t=new L(A,e);new l(t).initialize()}()),function(){const t=g.name.toUpperCase();h.textContent=`${e.toUpperCase()}, PLACE YOUR ${t}`}())})),d.addEventListener("click",(()=>{p="X"===p?"Y":"X",d.textContent="Orientation: "+p,f&&(y(f,g),b(f,g))})),n.appendChild(c),n.appendChild(h),n.appendChild(d),n.appendChild(u),t.appendChild(n)})(u.value)}))})()})();